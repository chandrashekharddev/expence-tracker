<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Dashboard - ExpenseTracker AI</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="static\dashboard.css">
</head>
<body class="bg-light">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-white bg-white shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand text-primary fw-bold" href="index.html">
                <i class="bi bi-wallet2 me-2"></i>ExpenseTracker AI
            </a>
            <div class="d-flex align-items-center">
                <div class="dropdown me-3">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="periodMenu" data-bs-toggle="dropdown">
                        <i class="bi bi-calendar-range me-1"></i> This Month
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" onclick="changePeriod('week')">This Week</a></li>
                        <li><a class="dropdown-item" href="#" onclick="changePeriod('month')">This Month</a></li>
                        <li><a class="dropdown-item" href="#" onclick="changePeriod('year')">This Year</a></li>
                        <li><a class="dropdown-item" href="#" onclick="changePeriod('all')">All Time</a></li>
                    </ul>
                </div>
                <div class="dropdown">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="userMenu" data-bs-toggle="dropdown">
                        <i class="bi bi-person me-1"></i> User
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item active" href="#"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
                        <li><a class="dropdown-item" href="index.html"><i class="bi bi-chat-dots me-2"></i>Expense Chat</a></li>
                        <!-- <li><a class="dropdown-item" href="#"><i class="bi bi-clock-history me-2"></i>History</a></li> -->
                        <li><hr class="dropdown-divider"></li>
                        <!-- <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Settings</a></li> -->
                        <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard Content -->
    <div class="container-fluid py-4">
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <h2 class="fw-bold">Expense Dashboard</h2>
                    <button class="btn btn-primary" onclick="location.href='#'">
                        <i class="bi bi-plus-circle me-2"></i>Add Expense
                    </button>
                </div>
                <p class="text-muted">Track and analyze your spending patterns</p>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="row g-4 mb-4">
            <div class="col-xl-3 col-md-6">
                <div class="stats-card bg-white p-4 shadow-sm fade-in">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="text-muted mb-2">Total Spent</h6>
                            <h3 class="fw-bold">₹12,540</h3>
                            <span class="text-success small">
                                <i class="bi bi-arrow-up-right me-1"></i>8.5% from last month
                            </span>
                        </div>
                        <div class="bg-primary bg-opacity-10 p-3 rounded-circle">
                            <i class="bi bi-cash-stack text-primary fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card bg-white p-4 shadow-sm fade-in">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="text-muted mb-2">Daily Average</h6>
                            <h3 class="fw-bold">₹418</h3>
                            <span class="text-danger small">
                                <i class="bi bi-arrow-down-right me-1"></i>12.3% from last month
                            </span>
                        </div>
                        <div class="bg-success bg-opacity-10 p-3 rounded-circle">
                            <i class="bi bi-graph-up-arrow text-success fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card bg-white p-4 shadow-sm fade-in">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="text-muted mb-2">Total Transactions</h6>
                            <h3 class="fw-bold">84</h3>
                            <span class="text-success small">
                                <i class="bi bi-arrow-up-right me-1"></i>15.2% from last month
                            </span>
                        </div>
                        <div class="bg-warning bg-opacity-10 p-3 rounded-circle">
                            <i class="bi bi-receipt text-warning fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-xl-3 col-md-6">
                <div class="stats-card bg-white p-4 shadow-sm fade-in">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h6 class="text-muted mb-2">Budget Remaining</h6>
                            <h3 class="fw-bold">₹7,460</h3>
                            <span class="text-muted small">of ₹20,000 budget</span>
                        </div>
                        <div class="bg-info bg-opacity-10 p-3 rounded-circle">
                            <i class="bi bi-piggy-bank text-info fs-4"></i>
                        </div>
                    </div>
                    <div class="progress spending-progress mt-3">
                        <div class="progress-bar bg-success" style="width: 62.7%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="row g-4 mb-4">
            <!-- Spending by Category Chart -->
            <div class="col-xl-6">
                <div class="chart-container h-100">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold mb-0">Spending by Category</h5>
                        <select class="form-select form-select-sm w-auto" id="categoryChartRange">
                            <option value="month">This Month</option>
                            <option value="week">This Week</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>
                    <div class="chart-wrapper" style="height: 300px;">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
            </div>
            
            <!-- Monthly Trend Chart -->
            <div class="col-xl-6">
                <div class="chart-container h-100">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold mb-0">Monthly Spending Trend</h5>
                        <select class="form-select form-select-sm w-auto" id="trendChartRange">
                            <option value="6">Last 6 Months</option>
                            <option value="12">Last 12 Months</option>
                            <option value="3">Last 3 Months</option>
                        </select>
                    </div>
                    <div class="chart-wrapper" style="height: 300px;">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Row: Recent Transactions & Category Breakdown -->
        <div class="row g-4">
            <!-- Recent Transactions -->
            <div class="col-xl-6">
                <div class="chart-container h-100">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold mb-0">Recent Transactions</h5>
                        <a href="#" class="text-primary text-decoration-none small">View All</a>
                    </div>
                    <div class="recent-transactions">
                        <div class="recent-transaction p-3 mb-3 bg-white rounded border-start border-primary">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-primary bg-opacity-10 p-2 rounded me-3">
                                            <i class="bi bi-tshirt text-primary"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">T-shirt Purchase</h6>
                                            <small class="text-muted">Clothes • Today, 2:30 PM</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <h6 class="text-danger mb-0 fw-bold">₹400</h6>
                                    <small class="text-muted">One-time</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recent-transaction p-3 mb-3 bg-white rounded border-start border-success">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-success bg-opacity-10 p-2 rounded me-3">
                                            <i class="bi bi-egg-fried text-success"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">Lunch at Restaurant</h6>
                                            <small class="text-muted">Food • Today, 1:15 PM</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <h6 class="text-danger mb-0 fw-bold">₹650</h6>
                                    <small class="text-muted">One-time</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recent-transaction p-3 mb-3 bg-white rounded border-start border-warning">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-warning bg-opacity-10 p-2 rounded me-3">
                                            <i class="bi bi-car-front text-warning"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">Taxi Ride</h6>
                                            <small class="text-muted">Transport • Yesterday, 6:45 PM</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <h6 class="text-danger mb-0 fw-bold">₹250</h6>
                                    <small class="text-muted">One-time</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recent-transaction p-3 mb-3 bg-white rounded border-start border-info">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-info bg-opacity-10 p-2 rounded me-3">
                                            <i class="bi bi-lightning-charge text-info"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">Electricity Bill</h6>
                                            <small class="text-muted">Bills • 2 days ago</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <h6 class="text-danger mb-0 fw-bold">₹1,850</h6>
                                    <small class="text-muted">Monthly</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="recent-transaction p-3 bg-white rounded border-start border-purple">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <div class="bg-purple bg-opacity-10 p-2 rounded me-3">
                                            <i class="bi bi-ticket-perforated text-purple"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1 fw-bold">Movie Tickets</h6>
                                            <small class="text-muted">Entertainment • 3 days ago</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <h6 class="text-danger mb-0 fw-bold">₹600</h6>
                                    <small class="text-muted">One-time</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Category Breakdown -->
            <div class="col-xl-6">
                <div class="chart-container h-100">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="fw-bold mb-0">Category Breakdown</h5>
                        <span class="text-muted small">This Month</span>
                    </div>
                    
                    <div class="category-breakdown">
                        <!-- Food Category -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <div class="bg-success bg-opacity-10 p-2 rounded me-3">
                                        <i class="bi bi-egg-fried text-success"></i>
                                    </div>
                                    <span class="fw-bold">Food & Dining</span>
                                </div>
                                <span class="fw-bold">₹4,250</span>
                            </div>
                            <div class="progress spending-progress">
                                <div class="progress-bar bg-success" style="width: 34%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-1">
                                <small class="text-muted">34% of total</small>
                                <small class="text-muted">12 transactions</small>
                            </div>
                        </div>
                        
                        <!-- Clothes Category -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <div class="bg-primary bg-opacity-10 p-2 rounded me-3">
                                        <i class="bi bi-tshirt text-primary"></i>
                                    </div>
                                    <span class="fw-bold">Clothing</span>
                                </div>
                                <span class="fw-bold">₹3,120</span>
                            </div>
                            <div class="progress spending-progress">
                                <div class="progress-bar bg-primary" style="width: 25%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-1">
                                <small class="text-muted">25% of total</small>
                                <small class="text-muted">5 transactions</small>
                            </div>
                        </div>
                        
                        <!-- Transport Category -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <div class="bg-warning bg-opacity-10 p-2 rounded me-3">
                                        <i class="bi bi-car-front text-warning"></i>
                                    </div>
                                    <span class="fw-bold">Transport</span>
                                </div>
                                <span class="fw-bold">₹2,180</span>
                            </div>
                            <div class="progress spending-progress">
                                <div class="progress-bar bg-warning" style="width: 17%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-1">
                                <small class="text-muted">17% of total</small>
                                <small class="text-muted">18 transactions</small>
                            </div>
                        </div>
                        
                        <!-- Bills Category -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <div class="bg-info bg-opacity-10 p-2 rounded me-3">
                                        <i class="bi bi-lightning-charge text-info"></i>
                                    </div>
                                    <span class="fw-bold">Bills & Utilities</span>
                                </div>
                                <span class="fw-bold">₹1,850</span>
                            </div>
                            <div class="progress spending-progress">
                                <div class="progress-bar bg-info" style="width: 15%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-1">
                                <small class="text-muted">15% of total</small>
                                <small class="text-muted">3 transactions</small>
                            </div>
                        </div>
                        
                        <!-- Entertainment Category -->
                        <div class="mb-4">
                            <div class="d-flex justify-content-between mb-2">
                                <div class="d-flex align-items-center">
                                    <div class="bg-purple bg-opacity-10 p-2 rounded me-3">
                                        <i class="bi bi-ticket-perforated text-purple"></i>
                                    </div>
                                    <span class="fw-bold">Entertainment</span>
                                </div>
                                <span class="fw-bold">₹1,140</span>
                            </div>
                            <div class="progress spending-progress">
                                <div class="progress-bar bg-purple" style="width: 9%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-1">
                                <small class="text-muted">9% of total</small>
                                <small class="text-muted">7 transactions</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialize Charts
        let categoryChart, trendChart;
        
        document.addEventListener('DOMContentLoaded', function() {
            // Category Chart
            const categoryCtx = document.getElementById('categoryChart').getContext('2d');
            categoryChart = new Chart(categoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Food & Dining', 'Clothing', 'Transport', 'Bills & Utilities', 'Entertainment', 'Others'],
                    datasets: [{
                        data: [4250, 3120, 2180, 1850, 1140, 0],
                        backgroundColor: [
                            '#4cc9f0',
                            '#4361ee',
                            '#f8961e',
                            '#7209b7',
                            '#f72585',
                            '#6c757d'
                        ],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    let value = context.parsed;
                                    let total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    let percentage = Math.round((value / total) * 100);
                                    return `${label}: ₹${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Trend Chart
            const trendCtx = document.getElementById('trendChart').getContext('2d');
            trendChart = new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                    datasets: [{
                        label: 'Monthly Spending',
                        data: [8500, 9200, 10200, 11400, 12540, 11000, 13200],
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4361ee',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return `₹${context.parsed.y}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                drawBorder: false
                            },
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value;
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
            
            // Add animation to cards
            const cards = document.querySelectorAll('.fade-in');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
            });
        });
        
        // Change period function
        function changePeriod(period) {
            const periodBtn = document.getElementById('periodMenu');
            let periodText = 'This Month';
            
            switch(period) {
                case 'week':
                    periodText = 'This Week';
                    break;
                case 'month':
                    periodText = 'This Month';
                    break;
                case 'year':
                    periodText = 'This Year';
                    break;
                case 'all':
                    periodText = 'All Time';
                    break;
            }
            
            periodBtn.innerHTML = `<i class="bi bi-calendar-range me-1"></i> ${periodText}`;
            
            // Here you would typically fetch new data based on the selected period
            // For demo, we'll just update the total spent
            const totals = {
                'week': '₹2,340',
                'month': '₹12,540',
                'year': '₹1,45,200',
                'all': '₹3,87,650'
            };
            
            document.querySelector('.stats-card h3').textContent = totals[period];
            
            // Show a toast notification
            showToast(`Showing data for ${periodText.toLowerCase()}`);
        }
        
        // Show toast notification
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'position-fixed bottom-0 end-0 p-3';
            toast.style.zIndex = '11';
            toast.innerHTML = `
                <div class="toast show" role="alert">
                    <div class="toast-header">
                        <i class="bi bi-info-circle text-primary me-2"></i>
                        <strong class="me-auto">Notification</strong>
                        <button type="button" class="btn-close" onclick="this.parentElement.parentElement.parentElement.remove()"></button>
                    </div>
                    <div class="toast-body">
                        ${message}
                    </div>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.remove();
                }
            }, 3000);
        }
        
        // Handle chart range changes
        document.getElementById('categoryChartRange').addEventListener('change', function(e) {
            const range = e.target.value;
            showToast(`Category chart updated for ${range === 'month' ? 'this month' : range === 'week' ? 'this week' : 'this year'}`);
        });
        
        document.getElementById('trendChartRange').addEventListener('change', function(e) {
            const months = e.target.value;
            showToast(`Trend chart updated for last ${months} months`);
        });
    </script>
</body>
</html>